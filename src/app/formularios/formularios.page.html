<!-- empieza el menu superior izquierdo -->
<ion-header color="light" class="ion-no-border" [translucent]="true">
  <ion-toolbar color="light">
    
    <ion-buttons *ngIf="informacion_perfil!=null&&informacion_perfil!=undefined" slot="end">
      <ion-button (click)="ONCHANGEmenuderechosuperior()" >
        <ion-avatar style="width:90%; height:90%;">
          <!-- <img src="assets/avatarassetsimage.png"> -->
          <img [src]="informacion_perfil.profile_url_img==undefined || informacion_perfil.profile_url_img==null || informacion_perfil.profile_url_img=='' ? 'assets/avatarassetsimage.png' : informacion_perfil.profile_url_img"/>
        </ion-avatar>
      </ion-button>
      <ion-button style="text-transform:none" (click)="ONCHANGEmenuderechosuperior()"><ion-text  style="margin-left: -8px;">{{this.informacion_perfil.email}}</ion-text><ion-icon name="ellipsis-vertical"></ion-icon></ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content color="light" (click)="ONCHANGEclickenelcontent()" [fullscreen]="true">
<ion-grid>


  <ion-card *ngIf="menuderechosuperior==true" style="position:sticky; float: right; width: fit-content; top:0%; z-index: 9999;">
    <ion-card-header>
      <ion-card-title>Mi Cuenta</ion-card-title>
      <ion-card-subtitle>Menu de Usuario</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
          <ion-list>
          <ion-item>
          <ion-label (click)="iramiperfilDelMenuDerechoSuperior()" style="cursor: pointer;">Mi perfil</ion-label>
          </ion-item>
          <ion-item>
          <ion-label style="cursor: pointer;">Mi Cuenta</ion-label>
          </ion-item>
          <ion-item (click)="logout()" style="cursor: pointer;">
          <ion-label>Salir</ion-label>
          </ion-item>
          </ion-list>
    </ion-card-content>
  </ion-card>
<!-- termina el menu superior izquierdo -->


<ion-segment (ionChange)="segmentChanged($event)" value="formularios">
  <ion-segment-button value="formularios">
    <ion-label>formularios</ion-label>
  </ion-segment-button>
  <ion-segment-button value="historial">
    <ion-label>Historial</ion-label>
  </ion-segment-button>
</ion-segment>


<section *ngIf="this.ValorSegmento=='formularios'">

  <section *ngIf="this.step=='1'">


        <ion-row class="ion-align-items-center">
          <ion-col style="text-align: center;" size="12" class="ion-text-center">
            <ion-text>Lista de formularios de mi cuenta:</ion-text>
          </ion-col>
        </ion-row>
      

        <ion-row no-padding class="ion-no-padding" >
          <ion-col no-padding class="ion-no-padding" >
            <ion-card *ngFor="let cadaformulario of tonystraerformulariosdeusuario"  style="margin:4px;">
              <!-- se carga la sig. seccion si el formulario "Tiene detalles" (si no ha sido borrado) -->
              <section *ngIf="cadaformulario.detalles">
                <ion-card-header color="primary">
                  <ion-card-subtitle>{{cadaformulario.detalles.nombre}}</ion-card-subtitle>
                </ion-card-header>
                <ion-card-content style="margin-left:0px;">
                  <ion-row>
                    <ion-col size="10">
                      <ion-text ><span class="v2-badge-aceptado v2-badge">Nombre:</span> {{cadaformulario.detalles.nombre}}.</ion-text>
                      <br><a style="line-height: 2.5em;"></a>
                      <ion-text><span class="v2-badge-aceptado v2-badge">ID:</span> {{cadaformulario.detalles.id}}.</ion-text>
                      <br><a style="line-height: 1.5em;"></a>                 
                      <ion-text><span class="v2-badge-aceptado v2-badge">Fecha:</span> {{cadaformulario.detalles.fecha_creacion | date:'shortDate':'GMT-5'}}.</ion-text>
                    </ion-col>
                    <ion-col size="2">
                      <ion-fab>
                        <br><br>
                        <ion-fab-button (click)="step2(cadaformulario)">Ver</ion-fab-button>
                      </ion-fab>
                    </ion-col>
                  </ion-row>

                </ion-card-content>
              </section>
              </ion-card>
          </ion-col>
        </ion-row>
      
  </section>

  <section *ngIf="this.step=='2'">
  <section  *ngIf="formularioseleccionado.detalles">
    <ion-button (click)="step1()" size="small">
      <ion-icon color="medium" name="arrow-back-outline"></ion-icon>
    </ion-button> &nbsp;&nbsp;
    <ion-text>Respondiendo: <strong color="primary">{{this.formularioseleccionado.detalles.nombre}}</strong></ion-text>


    
    <section *ngFor="let cadapregunta of respuestadetonysobtenerpreguntasdeformulario">
      <ion-card *ngIf="cadapregunta.tipo=='abierta'">
        <ion-card-header color="medium">
          <ion-card-subtitle>Pregunta abierta: <strong>{{cadapregunta.pregunta}}</strong></ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          <ion-textarea placeholder="Escriba aqui su respuesta"></ion-textarea>
        </ion-card-content>
      </ion-card>
      <ion-card *ngIf="cadapregunta.tipo=='cerrada'">
        <ion-card-header color="medium">
          <ion-card-subtitle>Pregunta Opciones multiples: <strong>{{cadapregunta.pregunta}}</strong></ion-card-subtitle>
        </ion-card-header>
        <ion-card-content style="margin:0;" no-padding class="ion-no-padding">
          <ion-row style="margin:0;" no-padding class="ion-no-padding">
            <ion-col *ngIf="cadapregunta.a" size="6" style="background-color:#FDF000; border-right: 1px solid #000000;" no-padding class="ion-no-padding">
              <ion-text style="color:black;">&nbsp;<span class="v2-badge v2-badge-letrapreguntaroja">A</span> {{cadapregunta.a}}</ion-text>
            </ion-col>
            <ion-col *ngIf="cadapregunta.b" size="6" style="background-color:#FDF000;" no-padding class="ion-no-padding">
              <ion-text style="color:black;">&nbsp;<span class="v2-badge v2-badge-letrapreguntaroja">B</span> {{cadapregunta.b}}</ion-text>
            </ion-col>
          </ion-row>
          <ion-row style="margin:0;" ion-no-padding class="no-padding">
            <ion-col *ngIf="cadapregunta.c" size="6"  style="background-color:#c81f26; border-right: 1px solid #000000;" no-padding class="ion-no-padding">
              <ion-text style="color:white;">&nbsp;<span class="v2-badge v2-badge-letrapreguntaamarilla">C</span> {{cadapregunta.c}}</ion-text>
            </ion-col>
            <ion-col *ngIf="cadapregunta.d" size="6"  style="background-color:#c81f26;" no-padding class="ion-no-padding">
              <ion-text style="color:white;">&nbsp;<span class="v2-badge v2-badge-letrapreguntaamarilla">D</span> {{cadapregunta.d}}</ion-text>
            </ion-col>
          </ion-row>
          <ion-row  style="margin:0;" no-padding class="ion-no-padding">
            <ion-col *ngIf="cadapregunta.e" size="6" style="background-color:#FDF000; border-right: 1px solid #000000;" no-padding class="ion-no-padding">
              <ion-text style="color:black;">&nbsp;<span class="v2-badge v2-badge-letrapreguntaroja">E</span> {{cadapregunta.e}}</ion-text>
            </ion-col>
            <ion-col *ngIf="cadapregunta.f" size="6" style="background-color:#FDF000;" no-padding class="ion-no-padding">
              <ion-text style="color:black;">&nbsp;<span class="v2-badge v2-badge-letrapreguntaroja">F</span> {{cadapregunta.f}}</ion-text>
            </ion-col>
          </ion-row>
      
        </ion-card-content>
      </ion-card>
    </section>
    
  </section>
  </section>


</section>
    



<section *ngIf="this.ValorSegmento=='historial'">
  <center>
    <img  width="50%" height="50%" src="assets/seccion-en-construccion.png">
  </center>
  <img src="assets/en-desarrollo.gif">
</section>




</ion-grid>
</ion-content>